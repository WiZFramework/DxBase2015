<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Trからのぷろansitional//EN">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>DxBase2015ドキュメント(2015年)</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<div id="header">
<h2>０．チュートリアル</h2>
</div>
<!-- コンテンツ　-->
<div id="contents">
<h3>００７．ステアリングを使用したプレイヤー</h3>
<br />
<h4>速度の自動計算</h4>
　前項では、速度を計算して、<b>Rigidbodyコンポーネント</b>のパラメータ<b>速度</b>を調整する方法でプレイヤーの動きを実装しました。<br />
　今回は、<b>ステアリング</b>というコンポーネントを使って、<b>速度</b>を調整します。<br />
　<b>Tutorial007</b>ディレクトリのソリューションを開くと以下のような画面になります。<br />
　内容は前項とほとんど同じですが、プレイヤーを動かしてみると、前項とは違った感触が得られると思います。<br />
　どこが違うというと、<b>なんとなく思った方向にきびきび動かない</b>ということです。<br />
　これは、<b>速度</b>を計算するのに、<b>ステアリング</b>というコンポーネントを利用しているからです。<br />
　<b>ステアリング</b>は直訳すると<b>操舵</b>ですが、このコンポーネントは現実社会のように、何かの速度を変更したり、止めたりするのに<b>加速</b>を使用しています。<br />
<br />
<p>&nbsp;</p>
<img src="img/0007a.jpg" width="80%"/>
<p>図0007a</p>
<p>&nbsp;</p>
<br/>
　<b>速度（Velocity）</b>は<b>加速</b>を加えることで増減します。動いているのが止まるのも、実は後ろ向きの加速が加わっています。ですから、<b>加速</b>を動的に変えることができれば<b>速度（Velocity）</b>を動的に変更できます。<br />
<br />
　では加速を変化させるのにはどうしたらいいかというと、まず、いわゆる<b>力（フォース）</b>を作り出します。たとえば何かを追いかけるとすれば、<b>追いかけようとするフォース</b>がありますし、目的地に到着するとすれば<b>到着しようとするフォース（ブレーキのようなもの）</b>が発生します。あるルートパスがあってそれに沿って進むとすれば、<b>その道筋に沿うようなフォース</b>が発生します。<b>複数のオブジェクトがお互いに引き合うフォース</b>もありますし、<b>お互いに離れようとするフォース</b>があります。<br />
　これらの一つ一つのフォースを作り出す仕組みが<b>ステアリング（操舵）</b>ということになります。<br/>
　そして、それらのフォースを加算していって、<b>最終的にその物体に影響するフォース</b>を作り出します。<br />
<br />
　全体的なフォースを求めましたら、物質によって質量が違いますので、質量を加味して加速に変換します。重いものに加速を加えるのには多くの力が必要ですし、軽いものであれば少なく済みます。それを計算するのです。<br />
　そして各物質に対する、一瞬一瞬の加速が出せましたら、その加速を使って、<b>現在の速度（Velocity）</b>を変化させます。<br />
<br />
　さて、今回、プレイヤーの場合具体的にはどのような<b>フォース</b>を発生させて、加速を計算してるのかというと、<b>Seek</b>という<b>ステアリング（操舵）</b>を使って<b>フォース</b>を発生させ、<b>Rigidbody</b>を使って加速を計算します。<br />
<br />
　前項でも以下の図は説明しましたが、プレイヤーとコントローラの関係は以下のような関係になります。
<p>&nbsp;</p>
<img src="img/0006b.jpg" width="60%"/>
<p>図0006b</p>
<p>&nbsp;</p>
　赤い線が<b>プレイヤーの目的の方向</b>です。<br />
　前項では。この方向を加算していましたが、今回は別の方法を使ってます。<br />
　<b>フォース</b>の向きは、以下のようになります。
<p>&nbsp;</p>
<img src="img/0007b.jpg" width="60%"/>
<p>図0007b</p>
<p>&nbsp;</p>
　つまり、<b>目的地へのベクトルから現在の速度を引いたベクトル</b>が、求めるべき<b>フォース</b>となります。<br/>
　カメラと自分の向きから、向いたいベクトルは算出できますので、そこに向かうフォースは<b>Seek</b>という<b>ステアリング（操舵）</b>を使って算出します。<br />
　<b>Seekステアリング（操舵）</b>は、コンポーネントとして実装します。<br/>
　コンポーネントの実装は、前項のように<b>Player::Create()</b>に記述します。<br />
　ここでは、<b>Rigidbody、SeekSteering</b>のほかに重力を加味するので、<b>Gravityコンポーネント</b>も追加しています。


<br />
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<ul class="foot_navi">
<li><a href="00_06.html">前ページ</a></li>
<li><a href="index.html">目次</a></li>
<li><a href="00_08.html">前ページ</a></li>
</ul>
<!-- /フッタ　-->


</div>
<!-- /全体コンテナ　-->
</body>
</html>
