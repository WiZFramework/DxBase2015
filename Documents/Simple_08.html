<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Trからのぷろansitional//EN">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="css/main.css" rel="stylesheet" type="text/css">
<title>DxBase2015ドキュメント(2015年)</title>
</head>
<body>
<!-- 全体コンテナ　-->
<div id="container">
<div id="header">
<h2>シンプルDxBase2015</h2>
</div>
<!-- コンテンツ　-->
<div id="contents">
<br/>
<h3>Simple08．リソース化へのヒントと衝突判定</h3>
<br />
<h4>リソース化</h4>
　同じ形状（スケーリングで対応できる形状は<b>同じ</b>とする）のメッシュや、テクスチャなどは、オブジェクトによって一つ一つバッファを作成すると無駄が出てしまいます。また、読み込みなどもオブジェクトごとに行うと動作速度にも影響します。<br />
　そのため、<b>DxBase2015フルバージョン</b>では、<b>リソース</b>という考え方を導入し、使いまわしできる頂点バッファやテクスチャなどは、別にメモリ上に配置しておいて、必要な時に使用します。<br />
　シンプル08のサンプルは、そんな<b>リソース化</b>の1つの方法を提案するものです。<br />
　また、このサンプルでは<b>衝突判定</b>も実装しています。<br />
　<b>DxBase2015Simple/Simple08</b>のソリューションを起動すると以下のような画面が現れます。
<p>&nbsp;</p>
<img src="img/Simple08a.jpg" width="80%"/>
<p>図Simple08a</p>
<p>&nbsp;</p>
　二つの動く立方体があり、衝突すると反対方向に移動します。<br />
　この立方体は、<b>同じ頂点バッファ、インデックスバッファ</b>を利用しています。またテクスチャも使い回しています。<br />
　リソース化を実装しているのは<b>ObjectResource、CubeResource、TextureResourceクラス</b>です。<br />
　<b>ObjectResourceとCubeResource</b>はメッシュのリソース化するクラスです。階層化されているのは、球体やカプセルなど別の形状をリソース化する場合に、<b>CubeResource</b>のように作成できるようにです。<b>TextureResource</b>は、階層化されてません。<br />
　ゲームステージ上で、立方体とテクスチャのインスタンスを作成します。ステージに配置する、<b>CubeObjectのインスタンス</b>はステージからこれらのリソースを得て、Drawします。<br />
<br/>
<h4>衝突判定</h4>
　フルバージョンでは、<b>コンポーネントによる自動衝突判定</b>ができますが、シンプルバージョンは<b>自動的には</b>行えませんが、衝突判定の基本的な関数は実装されています。<br />
　それらは、<b>TransHelper.h</b>にあり、<b>HitTestクラスのスタティック関数</b>として実装されています。<br />
　<b>HitTest::OBB_OBB()</b>などの関数は、形状同士の単なる判定です。このほかに<b>HitTest::SPHERE_OBB()</b>などがあります。<br />
　衝突判定にはもう一つの方法として<b>HitTest::CollisionTestObbObb()</b>などの<b>速度をパラメータに加える形</b>の判定もあります。こちらは、<b>トンネル現象</b>を起こしません。ただ、動いている物同士の場合、パラメータに渡す速度は、<b>片方を静止させた相対的な速度</b>、を渡します。また、こちらは衝突した場合は、その<b>時間</b>を返します。詳しくは<b>フルバージョンのCollisionコンポーネント</b>を参照してください。<br/>
　衝突判定は、フルバージョンの実装も、<b>Collisionコンポーネントを持ってるすべて</b>を相互に判定します。本当は、隣り合ってるオブジェクト同士のみ判定、とか、もう少し、判定をしなくて済むケースを実装すべきです。シンプルバージョンは、自動判定を行わないぶん、そのようなアルゴリズムを記述しやすくなっています。各自、効果的な衝突判定を実装してみるとよいでしょう。
<br />
</div>
<!-- /コンテンツ　-->
<hr>
<!-- フッタ　-->
<ul class="foot_navi">
<li><a href="Simple_07.html">前ページ</a></li>
<li><a href="index.html">目次</a></li>
</ul>
<!-- /フッタ　-->


</div>
<!-- /全体コンテナ　-->
</body>
</html>
